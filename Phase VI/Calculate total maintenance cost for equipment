
CREATE OR REPLACE FUNCTION get_total_maintenance_cost(
    p_equipment_id NUMBER
) RETURN NUMBER AS
    v_total NUMBER;
BEGIN
    SELECT NVL(SUM(Cost),0)
    INTO v_total
    FROM Maintenance
    WHERE EquipmentID = p_equipment_id;

    RETURN v_total;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RETURN 0;
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error calculating cost: ' || SQLERRM);
        RETURN NULL;
END;
/
